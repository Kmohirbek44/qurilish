{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="{% static '/css/base.css' %}">
  <title>{% if category %}{{ category.name }}{% else %}Products{% endif %}</title>
</head>

<body>
  <div id="header">

  </div>
  <div id="subheader">

        <form action="" method="get">
         <label class="small mb-1 " for="{{form.city.id_for_label}}">Shahar_yoki_viloyat</label>
                                                {{form.city}}
               <input type="submit" class="btn btn-primary" value="Qidirish">

    </div>
  </div>
  <div id="content">
<div id="sidebar">
  <h3>Mahsulotlar turlari</h3>
  <ul>
<!--    <li {% if not category %} class="selected" {% endif %}>-->
<!--      <a href="{% url 'shop:product_list' %}">Barcha mahsulotlar</a>-->
<!--    </li>-->

      <label class="small mb-1" for="{{form.category.id_for_label}}">Mahsulotlar</label>
    {{form.category }}

</div>



    <div class="col-md-6 mx-auto">




            <br>
            <br>

</form>
    </div>


<div id="main" class="product-list" >
  <h1>{% if category %}{{ category.name }}{% else %}Mahsulot{% endif %}</h1>
  {% for product in products %}
  <div class="item"  style="height:200px; width:200px;">
    <a href="{{ product.get_absolute_url }}">


      <img  style="height:150px;" src="{% if product.image %}{{ product.image.url }}{% else %}
      {% static 'img/no_image.png' %}{% endif %}"
        alt="product-image">
    </a>
    <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
    <br>
    {{ product.price }} so'm
  </div>
  {% endfor %}
</div>

  </div>
<br>
{% if page_obj %}
<div class="container-fluid" style="padding-top: 15px;">
<div  class='row' style="margin-left:auto;margin-right:auto;text-align:center">

<nav aria-label="Page navigation example">
  <ul class="pagination" >
      {% if page_obj.has_previous %}
    <li class="page-item ">
      <a class="page-link" href="?city={{city}}&category={{category}}&page={{ page_obj.previous_page_number }} " aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
       {% endif %}
      </a>
    </li>
      {% for page in page_obj.paginator.page_range %}

    <li class="page-item {% if page == page_obj.number %} active {% endif %}  "><a class="page-link" href="?city={{city}}&category={{category}}&page={{ page }}">{{ page }} </a></li>
      {% endfor %}
    {% if page_obj.has_next %}
    <li class="page-item">
      <a class="page-link" href="?city={{city}}&category={{category}}&page={{ page_obj.next_page_number }}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
      </a>
    </li>
      {% endif %}
  </ul>
</nav>
</div>
</div>


{% endif %}

</body>

</html>